# Adapted by Thibault PIANA & Alan Gardin
# First modification : 20/10/2015
# Last modification : 20/10/2015

# Copyright (C) 2010 Texas Instruments Incorporated - http://www.ti.com/ 
#
# Makefiles Definitions

LIB_GCC=${LIB_PATH}/lib/gcc/arm-none-eabi/4.3.3/
LIB_C=${LIB_PATH}/arm-none-eabi/lib/

#
# Target and Compiler definitions (Device and EVM specified by makefile)
#
TARGET=armv7a
COMPILER=gcc
BOOT=MMCSD

#
# Convert Windows native style filenames to POSIX style filenames
#
CYGPATH=cypath

#
# Target directories to be built
#
DAL_BLD=${ROOT}/build/${TARGET}/${COMPILER}/${DEVICE}/dal

#
# Pre/recompiled library paths
#
DAL_BIN=${ROOT}/bin/${TARGET}/${COMPILER}/${DEVICE}/dal

#
# Source code paths
#
DAL_SRC=${ROOT}/dal/src


#
# Include paths
#
IPATH=-I${ROOT}/include/hal/am335x/include \
      -I${ROOT}/dal/am335x/include/hw \
      -I"${LIB_PATH}/include"

#
# Library paths
#
LPATH=-L"${LIB_C}" \
      -L"${LIB_GCC}" \
      -L${DAL_BIN}/${TARGET_MODE} \

#
# C compilation options
#
Debug_FLAG=-g
Release_FLAG=-g -O2
ifdef DEVICE
DEVICE_D=-D${DEVICE}
endif
ifdef EVM
EVM_D=-D${EVM}
endif

CFLAGS=-mcpu=cortex-a8
CFLAGS+=-c ${${TARGET_MODE}_FLAG} -mlong-calls -fdata-sections -funsigned-char -ffunction-sections -Wall ${IPATH} -Dgcc ${DEVICE_D} ${EVM_D} -D SUPPORT_UNALIGNED -D ${BOOT}
#
# Defining the cross compiler tool prefix
#
ifndef PREFIX
PREFIX=arm-none-eabi-
endif

#
# Compiler, Linker and Archiver with respect to the toolchain
#
CC=${PREFIX}gcc
LD=${PREFIX}ld
AR=${PREFIX}ar
BIN=$(PREFIX)objcopy

#
# Archiver options
#
ARFLAGS=-c -r

#
# Linker options
#
LDFLAGS=-e Entry -u Entry -u __aeabi_uidiv -u __aeabi_idiv --gc-sections

#
# Binary options
#
BINFLAGS=-O binary
                          

