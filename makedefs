# Adapted by Thibault PIANA & Alan Gardin
# Creation : 20/10/2015

# Makefiles Definitions
LIB_GCC=${LIB_PATH}/lib/gcc/arm-none-eabi/4.3.3/
LIB_C=${LIB_PATH}/arm-none-eabi/lib/

# Source code paths
BOOT_SRC=${ROOT}/boot
ARCH_SRC=${ROOT}/arch
DRIVER_SRC=${ROOT}/drivers
KERNEL_SRC=${ROOT}/kernel
HAL_SRC=${ARCH_SRC}/arm/hal

# Include paths
IPATH=-I ${ROOT}/include/arch/arm \
      -I ${ROOT}/include/arch/arm/hal \
      -I ${ROOT}/include/arch/arm/hal/hw \
      -I ${ROOT}/include

# Library paths
LPATH=-L"${LIB_C}" \
      -L"${LIB_GCC}" \
      -L${HAL_BIN}/${TARGET_MODE} \

### Flags
CCLAGS = -Wall ${IPATH} -nostdlib -nostartfiles -ffreestanding -Dam335x -march=armv7-a -mtune=cortex-a8 -mcpu=cortex-a8
LDFLAGS = -e Entry -u Entry -u __aeabi_uidiv -u __aeabi_idiv --gc-sections

# Defining the cross compiler tool prefix
ifndef PREFIX
    PREFIX=arm-none-eabi
#    PREFIX=arm-linux-gnueabihf
endif

# Compiler, Linker and Archiver with respect to the toolchain
CC=${PREFIX}-gcc
LD=${PREFIX}-ld
AR=${PREFIX}-ar
BIN=$(PREFIX)-objcopy
AS=${PREFIX}-as

# arm-none-eabi-gcc -c -g -mcpu=cortex-a8 -mlong-calls -fdata-sections -funsigned-char -ffunction-sections -Wall -Dgcc -Dam335x -D SUPPORT_UNALIGNED -D MMCSD -g main.c